#!/bin/bash
export UUID=${UUID:-''}
export ARGO_DOMAIN=${ARGO_DOMAIN:-''}
export ARGO_AUTH=${ARGO_AUTH:-''}
export SSH_DOMAIN=${SSH_DOMAIN:-''}
export WEB_USERNAME=${WEB_USERNAME:-''}
export WEB_PASSWORD=${WEB_PASSWORD:-''}    
export CFIP=${CFIP:-''} 
export CFPORT=${CFPORT:-'443'}         
export NAME=${NAME:-'US-streamlit'}        
export FILE_PATH=${FILE_PATH:-'./tmp'}
export ARGO_PORT=${ARGO_PORT:-'8081'}

echo "YXJnb19jb25maWd1cmUoKSB7CiAgaWYgW1sgLXogJEFSR09fQVVUSCB8fCAteiAkQVJHT19ET01BSU4gXV07IHRoZW4KICAgIGVjaG8gLWUgIlxlWzE7MzJtQVJHT19ET01BSU4gb3IgQVJHT19BVVRIIHZhcmlhYmxlIGlzIGVtcHR5LCB1c2UgcXVpY2sgdHVubmVsc1xlWzBtIgogICAgcmV0dXJuCiAgZmkKCiAgaWYgW1sgJEFSR09fQVVUSCA9fiBUdW5uZWxTZWNyZXQgXV07IHRoZW4KICAgIGVjaG8gJEFSR09fQVVUSCA+ICR7RklMRV9QQVRIfS90dW5uZWwuanNvbgogICAgY2F0ID4gJHtGSUxFX1BBVEh9L3R1bm5lbC55bWwgPDwgRU9GCnR1bm5lbDogJChjdXQgLWRcIiAtZjEyIDw8PCAiJEFSR09fQVVUSCIpCmNyZWRlbnRpYWxzLWZpbGU6ICR7RklMRV9QQVRIfS90dW5uZWwuanNvbgpwcm90b2NvbDogaHR0cDIKCmluZ3Jlc3M6CiAgLSBob3N0bmFtZTogJEFSR09fRE9NQUlOCiAgICBzZXJ2aWNlOiBodHRwOi8vbG9jYWxob3N0OiRBUkdPX1BPUlQKICAtIGhvc3RuYW1lOiAkU1NIX0RPTUFJTgogICAgc2VydmljZTogaHR0cDovL2xvY2FsaG9zdDoyMjIyIAogICAgb3JpZ2luUmVxdWVzdDoKICAgICAgbm9UTFNWZXJpZnk6IHRydWUgCiAgLSBzZXJ2aWNlOiBodHRwX3N0YXR1czo0MDQKRU9GCiAgZWxzZQogICAgZWNobyAtZSAiXGVbMTszMm1BUkdPX0FVVEggbWlzbWF0Y2ggVHVubmVsU2VjcmV0LHVzZSB0b2tlbiBjb25uZWN0IHRvIHR1bm5lbFxlWzBtIgogIGZpCn0KYXJnb19jb25maWd1cmUKd2FpdAoKZ2VuZXJhdGVfY29uZmlnKCkgewogIGNhdCA+ICR7RklMRV9QQVRIfS9jb25maWcuanNvbiA8PCBFT0YKewogICJsb2ciOiB7CiAgICAiYWNjZXNzIjogIi9kZXYvbnVsbCIsCiAgICAiZXJyb3IiOiAiL2Rldi9udWxsIiwKICAgICJsb2dsZXZlbCI6ICJ3YXJuaW5nIgogIH0sCiAgImluYm91bmRzIjogWwogICAgewogICAgICAicG9ydCI6ICRBUkdPX1BPUlQsCiAgICAgICJsaXN0ZW4iOiAiOjoiLAogICAgICAicHJvdG9jb2wiOiAidmxlc3MiLAogICAgICAic2V0dGluZ3MiOiB7CiAgICAgICAgImNsaWVudHMiOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgICJpZCI6ICIke1VVSUR9IgogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgImRlY3J5cHRpb24iOiAibm9uZSIKICAgICAgfSwKICAgICAgInN0cmVhbVNldHRpbmdzIjogewogICAgICAgICJuZXR3b3JrIjogIndzIiwKICAgICAgICAid3NTZXR0aW5ncyI6IHsKICAgICAgICAgICJwYXRoIjogIi92bGVzcyIKICAgICAgICB9CiAgICAgIH0KICAgIH0KICBdLAogICAib3V0Ym91bmRzIjogWwogICAgIHsKICAgICAgICJ0YWciOiAiZGlyZWN0IiwKICAgICAgICJwcm90b2NvbCI6ICJmcmVlZG9tIgogICAgIH0KICBdCn0KRU9GCn0KZ2VuZXJhdGVfY29uZmlnCndhaXQKCkFSQ0g9JCh1bmFtZSAtbSkgJiYgRE9XTkxPQURfRElSPSIke0ZJTEVfUEFUSH0iICYmIG1rZGlyIC1wICIkRE9XTkxPQURfRElSIiAmJiBGSUxFX0lORk89KCkKaWYgWyAiJEFSQ0giID09ICJhcm0iIF0gfHwgWyAiJEFSQ0giID09ICJhcm02NCIgXSB8fCBbICIkQVJDSCIgPT0gImFhcmNoNjQiIF07IHRoZW4KICAgIEZJTEVfSU5GTz0oImh0dHBzOi8vZ2l0aHViLmNvbS9lb29jZS90ZXN0L3JlbGVhc2VzL2Rvd25sb2FkL2FybTY0L2JvdDEzIGFyZyIgImh0dHBzOi8vZ2l0aHViLmNvbS9lb29jZS90ZXN0L3JlbGVhc2VzL2Rvd25sb2FkL2FybTY0L3hyYXkgaHR0cCIgImh0dHBzOi8vZ2l0aHViLmNvbS90c2wwOTIyL3R0eWQvcmVsZWFzZXMvZG93bmxvYWQvMS43LjcvdHR5ZC5hcm0gdHR5ZCIpCmVsaWYgWyAiJEFSQ0giID09ICJhbWQ2NCIgXSB8fCBbICIkQVJDSCIgPT0gIng4Nl82NCIgXSB8fCBbICIkQVJDSCIgPT0gIng4NiIgXTsgdGhlbgogICAgRklMRV9JTkZPPSgiaHR0cHM6Ly9naXRodWIuY29tL2Vvb2NlL3Rlc3QvcmVsZWFzZXMvZG93bmxvYWQvYW1kNjQvYm90MTMgYXJnIiAiaHR0cHM6Ly9naXRodWIuY29tL2Vvb2NlL3Rlc3QvcmVsZWFzZXMvZG93bmxvYWQvYW1kNjQveHJheSBodHRwIiAiaHR0cHM6Ly9naXRodWIuY29tL3RzbDA5MjIvdHR5ZC9yZWxlYXNlcy9kb3dubG9hZC8xLjcuNy90dHlkLng4Nl82NCB0dHlkIikKZWxzZQogICAgZWNobyAiVW5zdXBwb3J0ZWQgYXJjaGl0ZWN0dXJlOiAkQVJDSCIKICAgIGV4aXQgMQpmaQpmb3IgZW50cnkgaW4gIiR7RklMRV9JTkZPW0BdfSI7IGRvCiAgICBVUkw9JChlY2hvICIkZW50cnkiIHwgY3V0IC1kICcgJyAtZiAxKQogICAgTkVXX0ZJTEVOQU1FPSQoZWNobyAiJGVudHJ5IiB8IGN1dCAtZCAnICcgLWYgMikKICAgIEZJTEVOQU1FPSIkRE9XTkxPQURfRElSLyRORVdfRklMRU5BTUUiCiAgICBpZiBbIC1lICIkRklMRU5BTUUiIF07IHRoZW4KICAgICAgICBlY2hvIC1lICJcZVsxOzMybSRGSUxFTkFNRSBhbHJlYWR5IGV4aXN0cyxTa2lwcGluZyBkb3dubG9hZFxlWzBtIgogICAgZWxzZQogICAgICAgIGN1cmwgLUwgLXNTIC1vICIkRklMRU5BTUUiICIkVVJMIgogICAgICAgIGVjaG8gLWUgIlxlWzE7MzJtRG93bmxvYWRpbmcgJEZJTEVOQU1FXGVbMG0iCiAgICBmaQpkb25lCndhaXQKCnJ1bigpIHsKICBpZiBbIC1lICIke0ZJTEVfUEFUSH0vaHR0cCIgXTsgdGhlbgogICAgY2htb2QgNzc3ICIke0ZJTEVfUEFUSH0vaHR0cCIKICAgIG5vaHVwICR7RklMRV9QQVRIfS9odHRwIC1jICR7RklMRV9QQVRIfS9jb25maWcuanNvbiA+L2Rldi9udWxsIDI+JjEgJgoJICBzbGVlcCAyCiAgICBwZ3JlcCAteCAiaHR0cCIgPiAvZGV2L251bGwgJiYgZWNobyAtZSAiXGVbMTszMm1odHRwIGlzIHJ1bm5pbmdcZVswbSIgfHwgeyBlY2hvIC1lICJcZVsxOzM1bWh0dHAgaXMgbm90IHJ1bm5pbmcsIHJlc3RhcnRpbmcuLi5cZVswbSI7IHBraWxsIC14ICJodHRwIiAmJiBub2h1cCAiJHtGSUxFX1BBVEh9L2h0dHAiIC1jICR7RklMRV9QQVRIfS9jb25maWcuanNvbiA+L2Rldi9udWxsIDI+JjEgJiBzbGVlcCAyOyBlY2hvIC1lICJcZVsxOzMybWh0dHAgcmVzdGFydGVkXGVbMG0iOyB9CiAgZmkKCiAgaWYgWyAtZSAiJHtGSUxFX1BBVEh9L2FyZyIgXTsgdGhlbgogICAgY2htb2QgNzc3ICIke0ZJTEVfUEFUSH0vYXJnIgogICAgaWYgW1sgJEFSR09fQVVUSCA9fiBeW0EtWjAtOWEtej1dezEyMCwyNTB9JCBdXTsgdGhlbgogICAgICBhcmdzPSJ0dW5uZWwgLS1lZGdlLWlwLXZlcnNpb24gYXV0byAtLW5vLWF1dG91cGRhdGUgLS1wcm90b2NvbCBodHRwMiBydW4gLS10b2tlbiAke0FSR09fQVVUSH0iCiAgICBlbGlmIFtbICRBUkdPX0FVVEggPX4gVHVubmVsU2VjcmV0IF1dOyB0aGVuCiAgICAgIGFyZ3M9InR1bm5lbCAtLWVkZ2UtaXAtdmVyc2lvbiBhdXRvIC0tY29uZmlnICR7RklMRV9QQVRIfS90dW5uZWwueW1sIHJ1biIKICAgIGVsc2UKICAgICAgYXJncz0idHVubmVsIC0tZWRnZS1pcC12ZXJzaW9uIGF1dG8gLS1uby1hdXRvdXBkYXRlIC0tcHJvdG9jb2wgaHR0cDIgLS1sb2dmaWxlICR7RklMRV9QQVRIfS9ib290LmxvZyAtLWxvZ2xldmVsIGluZm8gLS11cmwgaHR0cDovL2xvY2FsaG9zdDokQVJHT19QT1JUIgogICAgZmkKICAgIG5vaHVwICR7RklMRV9QQVRIfS9hcmcgJGFyZ3MgPi9kZXYvbnVsbCAyPiYxICYKICAgIHNsZWVwIDIKICAgIHBncmVwIC14ICJhcmciID4gL2Rldi9udWxsICYmIGVjaG8gLWUgIlxlWzE7MzJtYXJnIGlzIHJ1bm5pbmdcZVswbSIgfHwgeyBlY2hvIC1lICJcZVsxOzM1bWFyZyBpcyBub3QgcnVubmluZywgcmVzdGFydGluZy4uLlxlWzBtIjsgcGtpbGwgLXggImFyZyIgJiYgbm9odXAgIiR7RklMRV9QQVRIfS9hcmciICRhcmdzID4vZGV2L251bGwgMj4mMSAmIHNsZWVwIDI7IGVjaG8gLWUgIlxlWzE7MzJtYXJnIHJlc3RhcnRlZFxlWzBtIjsgfQogIGZpCiAgCiAgaWYgWyAtZSAiJHtGSUxFX1BBVEh9L3R0eWQiIF07IHRoZW4KICAgIGNobW9kIDc3NyAiJHtGSUxFX1BBVEh9L3R0eWQiCiAgICBub2h1cCAke0ZJTEVfUEFUSH0vdHR5ZCAtYyAke1dFQl9VU0VSTkFNRX06JHtXRUJfUEFTU1dPUkR9IC1wIDIyMjIgLVcgYmFzaCA+L2Rldi9udWxsIDI+JjEgJgoJICBzbGVlcCAyCiAgICBwZ3JlcCAteCAidHR5ZCIgPiAvZGV2L251bGwgJiYgZWNobyAtZSAiXGVbMTszMm10dHlkIGlzIHJ1bm5pbmdcZVswbSIgfHwgeyBlY2hvIC1lICJcZVsxOzM1bXR0eWQgaXMgbm90IHJ1bm5pbmcsIHJlc3RhcnRpbmcuLi5cZVswbSI7IHBraWxsIC14ICJ0dHlkIiAmJiBub2h1cCAiJHtGSUxFX1BBVEh9L3R0eWQiIC1jICR7V0VCX1VTRVJOQU1FfToke1dFQl9QQVNTV09SRH0gLXAgMjIyMiAtVyBiYXNoID4vZGV2L251bGwgMj4mMSAmIHNsZWVwIDI7IGVjaG8gLWUgIlxlWzE7MzJtdHR5ZCByZXN0YXJ0ZWRcZVswbSI7IH0KICBmaQp9IApydW4Kc2xlZXAgNQoKZnVuY3Rpb24gZ2V0X2FyZ29kb21haW4oKSB7CiAgaWYgW1sgLW4gJEFSR09fQVVUSCBdXTsgdGhlbgogICAgZWNobyAiJEFSR09fRE9NQUlOIgogIGVsc2UKICAgIGdyZXAgLW9FICdodHRwczovL1tbOmFsbnVtOl0rXC4tXStcLnRyeWNsb3VkZmxhcmVcLmNvbScgIiR7RklMRV9QQVRIfS9ib290LmxvZyIgfCBzZWQgJ3NAaHR0cHM6Ly9AQCcKICBmaQp9CgpnZW5lcmF0ZV9saW5rcygpIHsKICBhcmdvZG9tYWluPSQoZ2V0X2FyZ29kb21haW4pCiAgZWNobyAtZSAiXGVbMTszMm1BcmdvRG9tYWluOlxlWzE7MzVtJHthcmdvZG9tYWlufVxlWzBtIgogIHNsZWVwIDIKCiAgaXNwPSQoY3VybCAtcyBodHRwczovL3NwZWVkLmNsb3VkZmxhcmUuY29tL21ldGEgfCBhd2sgLUZcIiAne3ByaW50ICQyNiItIiQxOH0nIHwgc2VkIC1lICdzLyAvXy9nJykKICBzbGVlcCAyCgogIGNhdCA+ICR7RklMRV9QQVRIfS9saXN0LnR4dCA8PEVPRgp2bGVzczovLyR7VVVJRH1AJHtDRklQfToke0NGUE9SVH0/ZW5jcnlwdGlvbj1ub25lJnNlY3VyaXR5PXRscyZzbmk9JHthcmdvZG9tYWlufSZ0eXBlPXdzJmhvc3Q9JHthcmdvZG9tYWlufSZwYXRoPSUyRnZsZXNzP2VkPTI1NjAjJHtOQU1FfQpFT0YKCiAgY2F0ICR7RklMRV9QQVRIfS9saXN0LnR4dAogIGVjaG8gLWUgIlxuXGVbMTszMm0ke0ZJTEVfUEFUSH0vbGlzdC50eHQgc2F2ZWQgc3VjY2Vzc2Z1bGx5XGVbMG0iCiAgc2xlZXAgNSAgCiAgcm0gLXJmICR7RklMRV9QQVRIfS9ib290LmxvZyAke0ZJTEVfUEFUSH0vY29uZmlnLmpzb24gJHtGSUxFX1BBVEh9L3R1bm5lbC5qc29uICR7RklMRV9QQVRIfS90dW5uZWwueW1sCn0KZ2VuZXJhdGVfbGlua3MKZWNobyAtZSAiXGVbMTs5Nm1SdW5uaW5nIGRvbmUhXGVbMG0iCmVjaG8gLWUgIlxlWzE7OTZtVGhhbmsgeW91IGZvciB1c2luZyB0aGlzIHNjcmlwdCxlbmpveSFcZVswbSIKc2xlZXAgNjAKY2xlYXI=" | base64 -d | bash

while true; do

echo "app is running"

sleep 36000000000

done